@model FIVESTARVC.Models.Resident
@using FIVESTARVC.Models;

@{
    Layout = null;
}


@using (Html.BeginForm("Discharge", "Residents"))
{
    @Html.AntiForgeryToken()

    <h4>Discharge @Model.Fullname</h4>
    <p> Are you sure you want to discharge this resident from your center?</p>
    <br />
    @Html.ValidationSummary(true, "")
    @Html.HiddenFor(model => model.ResidentID)

    <div class="container">
        <div class="row">

            <div class="table-responsive">
                <table class="table table-sm">

                    <tbody>
                        <tr>
                            <td>@Html.Label("Discharge Date")</td>
                            <td>
                                <div class="input-group mb-2">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text fa fa-calendar fa-fw" style="width:40px;"></span>
                                    </div>
                                    <input type="date" name="DischargeDate" id="DischargeDate" class="form-control" />
                                </div>
                            </td>
                        </tr>
                        <tr>

                            <td class="col-form-label">

                                @Html.LabelFor(model => model.ClearLastName, htmlAttributes: new { @class = "control-label" })
                            </td>
                            <td>
                                @(Model.ClearLastName)
                            </td>

                        </tr>
                        <tr>
                            <td class="col-form-label">@Html.LabelFor(model => model.FirstMidName, htmlAttributes: new { @class = "control-label" })</td>
                            <td>
                                @(Model.FirstMidName)
                            </td>
                        </tr>
                        <tr>
                            <td class="col-form-label">@Html.LabelFor(model => model.ClearBirthdate, htmlAttributes: new { @class = "control-label" })</td>
                            <td>
                                @(Model.ClearBirthdate.ToLongDateString())
                            </td>
                        </tr>
                        <tr>
                            <td class="col-form-label"> @Html.LabelFor(model => model.ServiceBranch, htmlAttributes: new { @class = "control-label" })</td>
                            <td>
                                @{
                                    var serviceDescription = FSEnumHelper.GetDescription(Model.ServiceBranch);


                                    @Html.DisplayFor(modelItem => serviceDescription)
                                }
                            </td>
                        </tr>
                        <tr>
                            <td class="col-form-label"> @Html.LabelFor(model => model.RoomNumber, htmlAttributes: new { @class = "control-label" })</td>
                            <td>
                                @ViewBag.releaseRoom
                            </td>
                        </tr>


                    </tbody>
                </table>



                <div class="form-group">
                    @Html.Label("Discharge Reason", htmlAttributes: new { @class = "control-label" })
                    <div>
                        @Html.DropDownList("ProgramTypeID", null, htmlAttributes: new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.ProgramEvents, "")
                    </div>
                    @Html.LabelFor(model => model.Note, htmlAttributes: new { @class = "control-label" })
                    <div>
                        @Html.TextAreaFor(model => model.Note, htmlAttributes: new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.Note, "")
                    </div>
                </div>
            </div>

        </div>


        <div class="row">
            <div class="form-group form-inline">
                <div class="btn-toolbar mr-1">
                    <button type="button" class="btn btn-default"
                            data-dismiss="modal">
                        Cancel
                    </button>

                    <input type="submit" value="Discharge"
                           class="btn btn-danger"
                           style="margin-left: 5px;" />
                </div>

            </div>
        </div>

    </div>
}



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript">

        if (!Modernizr.inputtypes.date) {
            $('input[type=date]')
                .attr('type', 'text')
                .datepicker({
                    // Consistent format with the HTML5 picker
                    dateFormat: 'mm-dd-yy'
                });
        }

        $(function () {
            $('#submit-btn').click(function () {
                $('#modal-container').modal('hide');
            });
        });
    </script>

}
